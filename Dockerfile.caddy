FROM caddy:2.7-alpine@sha256:2e1d4592f1718bb47645da5a83a846fe19094f18e6c921fdf56d174f05c63213

# Create a non-root user
RUN adduser -D -u 1001 caddy-user

# Change ownership of Caddy directories
RUN chown -R 1001:1001 /config /data

USER 1001

# Caddy will run on high ports (8080/8443) instead of 80/443
EXPOSE 8080 8443